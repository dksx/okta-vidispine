(this["webpackJsonpokta-vidispine"]=this["webpackJsonpokta-vidispine"]||[]).push([[0],{323:function(e,t,n){e.exports=n(582)},581:function(e,t,n){},582:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(71),o=n.n(c),i=(n(328),n(290));"undefined"===typeof window.TextEncoder&&(window.TextEncoder=i.TextEncoder);var l=n(61),s=n(185),u=n(25),d=n(15),m={oidc:{clientId:"0oaql6w9sHMm6ftI44x6",issuer:"https://dev-136034.okta.com/oauth2/default",redirectUri:"http://localhost:4000/implicit/callback",scopes:["openid","profile","email"],pkce:!0,disableHttpsCheck:"false"},resourceServer:{}},h=n(39),p=n.n(h),f=n(72),E=n(48),v=function(){var e=Object(u.useOktaAuth)(),t=e.authState,n=e.authService,c=Object(a.useState)(null),o=Object(E.a)(c,2),i=o[0],l=o[1];Object(a.useEffect)((function(){t.isAuthenticated?n.getUser().then((function(e){l(e)})):l(null)}),[t,n]);var s=function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.login("/");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t.isPending?r.a.createElement("div",null,"Loading..."):r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(d.c,{as:"h1"},"PKCE Flow w/ Okta Hosted Login Page"),t.isAuthenticated&&!i&&r.a.createElement("div",null,"Loading user information..."),t.isAuthenticated&&i&&r.a.createElement("div",null,r.a.createElement("p",null,"Welcome back,",i.name,"!"),r.a.createElement("p",null,"You have successfully authenticated against your Okta org, and have been redirected back to this application.  You now have an ID token and access token in local storage. Visit the"," ",r.a.createElement("a",{href:"/profile"},"My Profile")," ","page to take a look inside the ID token."),r.a.createElement("h3",null,"Next Steps"),r.a.createElement("p",null,"Currently this application is a stand-alone front end application.  At this point you can use the access token to authenticate yourself against resource servers that you control."),r.a.createElement("p",null,"This sample is designed to work with one of our resource server examples.  To see access token authentication in action, please download one of these resource server examples:"),r.a.createElement("ul",null,[{label:"Node/Express Resource Server Example",url:"https://github.com/okta/samples-nodejs-express-4/tree/master/resource-server"},{label:"Java/Spring MVC Resource Server Example",url:"https://github.com/okta/samples-java-spring-mvc/tree/master/resource-server"}].map((function(e){return r.a.createElement("li",{key:e.url},r.a.createElement("a",{href:e.url},e.label))}))),r.a.createElement("p",null,r.a.createElement("a",{href:"/test"},"Vidispine test")," ","page to see the authentication process in action.")),!t.isAuthenticated&&r.a.createElement("div",null,r.a.createElement("p",null,"If you\u2018re viewing this page then you have successfully started this React application."),r.a.createElement("p",null,r.a.createElement("span",null,"This example shows you how to use the "),r.a.createElement("a",{href:"https://github.com/okta/okta-oidc-js/tree/master/packages/okta-react"},"Okta React Library"),r.a.createElement("span",null," to add the "),r.a.createElement("a",{href:"https://developer.okta.com/docs/guides/implement-auth-code-pkce"},"PKCE Flow"),r.a.createElement("span",null," to your application.")),r.a.createElement("p",null,"When you click the login button below, you will be redirected to the login page on your Okta org. After you authenticate, you will be returned to this application with an ID token and access token.  These tokens will be stored in local storage and can be retrieved at a later time."),r.a.createElement(d.a,{id:"login-button",primary:!0,onClick:s},"Login"))))},g=n(321),k=(n(564),function(){return Object(a.useEffect)((function(){var e=m.oidc,t=e.pkce,n=e.issuer,a=e.clientId,r=e.redirectUri,c=e.scopes;new g({baseUrl:n.split("/oauth2")[0],clientId:a,redirectUri:r,logo:"/react.svg",i18n:{en:{"primaryauth.title":"Sign in to React & Company"}},authParams:{pkce:t,issuer:n,display:"page",responseMode:t?"query":"fragment",scopes:c}}).renderEl({el:"#sign-in-widget"},(function(){}),(function(e){throw e}))}),[]),r.a.createElement("div",null,r.a.createElement("div",{id:"sign-in-widget"}))}),b=function(){var e=Object(u.useOktaAuth)().authState,t=Object(a.useState)(null),n=Object(E.a)(t,2),c=n[0],o=n[1];return Object(a.useEffect)((function(){if(e.isAuthenticated){var t=e.accessToken;o(t)}}),[e]),r.a.createElement("div",null,r.a.createElement(d.c,{as:"h1"},r.a.createElement(d.d,{name:"spy"}),"Access Token"),r.a.createElement("div",{style:{wordBreak:"break-all"}},r.a.createElement("strong",null,c)))},w=n(322),y=n.n(w),O=function(){var e=Object(u.useOktaAuth)().authState,t=Object(a.useState)(null),n=Object(E.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(""),l=Object(E.a)(i,2),s=l[0],m=l[1],h=Object(a.useState)(null),v=Object(E.a)(h,2),g=v[0],k=v[1];Object(a.useEffect)((function(){if(e.isAuthenticated){var t=e.accessToken;o(t)}}),[e]);var b=function(){var e=Object(f.a)(p.a.mark((function e(){var t,n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:"Bearer ".concat(c),Accept:"text/plain"}},e.prev=1,n="".concat(s,"/API/version"),e.next=5,y.a.get(n,t);case 5:a=e.sent,k(a.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),k(String(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(d.c,{as:"h1"},r.a.createElement(d.d,{name:"terminal"}),"Vidispine test call"),r.a.createElement(d.f,{style:{width:"100%",marginTop:"1rem"},onChange:function(e){return m(e.target.value)},placeholder:"https://asdf.myvidispine.com"}),r.a.createElement(d.a,{onClick:b,style:{marginTop:"1rem"},color:"teal"},"Get Version"),r.a.createElement("div",{style:{whiteSpace:"pre-line",marginTop:"1rem"}},g))},j=function(){var e=Object(u.useOktaAuth)(),t=e.authState,n=e.authService,a=function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.login("/"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.logout("/"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(d.g,{fixed:"top",inverted:!0},r.a.createElement(d.b,null,r.a.createElement(d.g.Item,{as:"a",header:!0,href:"/"},r.a.createElement(d.e,{size:"mini",src:"/react.svg"}),"\xa0 Okta-React Sample Project"),t.isAuthenticated&&r.a.createElement(d.g.Item,{id:"access-button",as:"a",href:"/token"},"Access Token"),t.isAuthenticated&&r.a.createElement(d.g.Item,{id:"profile-button",as:"a",href:"/profile"},"Profile"),t.isAuthenticated&&r.a.createElement(d.g.Item,{id:"test-button",as:"a",href:"/test"},"Vidispine test"),t.isAuthenticated&&r.a.createElement(d.g.Item,{id:"logout-button",as:"a",onClick:c},"Logout"),!t.isPending&&!t.isAuthenticated&&r.a.createElement(d.g.Item,{as:"a",onClick:a},"Login"))))},S=function(){var e=Object(u.useOktaAuth)(),t=e.authState,n=e.authService,c=Object(a.useState)(null),o=Object(E.a)(c,2),i=o[0],l=o[1];return Object(a.useEffect)((function(){t.isAuthenticated?n.getUser().then((function(e){l(e)})):l(null)}),[t,n]),i?r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(d.c,{as:"h1"},r.a.createElement(d.d,{name:"drivers license outline"})," ","My User Profile (ID Token Claims)"," "),r.a.createElement("p",null,"Below is the information from your ID token which was obtained during the \xa0",r.a.createElement("a",{href:"https://developer.okta.com/docs/guides/implement-auth-code-pkce"},"PKCE Flow")," ","and is now stored in local storage."),r.a.createElement("p",null,"This route is protected with the",r.a.createElement("code",null,"<SecureRoute>")," ","component, which will ensure that this page cannot be accessed until you have authenticated."),r.a.createElement(d.h,null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Claim"),r.a.createElement("th",null,"Value"))),r.a.createElement("tbody",null,Object.entries(i).map((function(e){var t=e[0],n=e[1],a="claim-".concat(t);return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t),r.a.createElement("td",{id:a},n))})))))):r.a.createElement("div",null,r.a.createElement("p",null,"Fetching user profile..."))},A=function(){var e=Object(l.k)();return r.a.createElement(u.Security,Object.assign({},m.oidc,{onAuthRequired:function(){e.push("/login")}}),r.a.createElement(j,null),r.a.createElement(d.b,{text:!0,style:{marginTop:"7em",width:"100%",height:"100%"}},r.a.createElement(l.d,{path:"/",exact:!0,component:v}),r.a.createElement(l.d,{path:"/implicit/callback",component:u.LoginCallback}),r.a.createElement(l.d,{path:"/login",component:k}),r.a.createElement(u.SecureRoute,{path:"/token",component:b}),r.a.createElement(u.SecureRoute,{path:"/profile",component:S}),r.a.createElement(u.SecureRoute,{path:"/test",component:O})))},x=function(){return r.a.createElement("div",null,r.a.createElement(s.BrowserRouter,null,r.a.createElement(A,null)))},I=(n(581),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function T(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement(x,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/okta-vidispine",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/okta-vidispine","/service-worker.js");I?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):T(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):T(e)}))}}()}},[[323,1,2]]]);
//# sourceMappingURL=main.e422041e.chunk.js.map