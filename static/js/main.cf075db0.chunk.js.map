{"version":3,"sources":["polyfills.js","config.js","Home.jsx","Login.jsx","Token.jsx","VS.jsx","Navbar.jsx","Profile.jsx","App.jsx","registerServiceWorker.js","index.js"],"names":["window","TextEncoder","oidc","clientId","process","issuer","redirectUri","scopes","pkce","disableHttpsCheck","resourceServer","Home","useOktaAuth","authState","authService","useState","userInfo","setUserInfo","useEffect","isAuthenticated","getUser","then","info","login","a","isPending","as","name","href","label","url","map","example","key","id","primary","onClick","Login","config","OktaSignIn","baseUrl","split","logo","i18n","en","authParams","display","responseMode","renderEl","el","err","Messages","token","setToken","accessToken","style","VS","vaas","setVaas","version","setVersion","getVersion","options","headers","vidispineDomain","axios","get","upload","data","String","width","marginTop","onChange","e","target","value","placeholder","color","whiteSpace","Navbar","logout","fixed","inverted","Item","header","size","src","Profile","Object","entries","claimEntry","claimName","claimValue","claimId","HasAccessToRouter","history","useHistory","onAuthRequired","push","text","height","path","exact","component","LoginCallback","CustomLoginComponent","Token","App","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","console","log","catch","error","ReactDOM","render","document","getElementById","URL","origin","addEventListener","fetch","response","status","indexOf","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.cf075db0.chunk.js","sourcesContent":["// polyfill TextEncoder for IE Edge\nimport { TextEncoder } from 'text-encoding';\n\n/* global window */\nif (typeof window.TextEncoder === 'undefined') {\n  window.TextEncoder = TextEncoder;\n}\n","const CLIENT_ID = process.env.CLIENT_ID || '{clientId}';\nconst ISSUER = process.env.ISSUER || 'https://{yourOktaDomain}.com/oauth2/default';\nconst OKTA_TESTING_DISABLEHTTPSCHECK = process.env.OKTA_TESTING_DISABLEHTTPSCHECK || false;\n\nexport default {\n  oidc: {\n    clientId: CLIENT_ID,\n    issuer: ISSUER,\n    //redirectUri: 'https://oauth2.vidispine.site/implicit/callback',\n    //redirectUri: 'http://localhost:4000/implicit/callback',\n    redirectUri: 'https://dksx.github.io/okta-vidispine/implicit/callback',\n    scopes: ['openid', 'profile', 'email'],\n    pkce: true,\n    disableHttpsCheck: false,\n  },\n  resourceServer: {\n    // backendURI: 'http://vidispine.com\n  },\n};\n","/*\n * Copyright (c) 2018, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { useOktaAuth } from '@okta/okta-react';\nimport React, { useState, useEffect } from 'react';\nimport { Button, Header } from 'semantic-ui-react';\n\nconst Home = () => {\n  const { authState, authService } = useOktaAuth();\n  const [userInfo, setUserInfo] = useState(null);\n\n  useEffect(() => {\n    if (!authState.isAuthenticated) {\n      // When user isn't authenticated, forget any user info\n      setUserInfo(null);\n    } else {\n      authService.getUser().then((info) => {\n        setUserInfo(info);\n      });\n    }\n  }, [authState, authService]); // Update if authState changes\n\n  const login = async () => {\n    authService.login('/okta-vidispine/');\n  };\n\n  const resourceServerExamples = [\n    {\n      label: 'Node/Express Resource Server Example',\n      url: 'https://github.com/okta/samples-nodejs-express-4/tree/master/resource-server',\n    },\n    {\n      label: 'Java/Spring MVC Resource Server Example',\n      url: 'https://github.com/okta/samples-java-spring-mvc/tree/master/resource-server',\n    },\n  ];\n\n  if (authState.isPending) {\n    return (\n      <div>Loading...</div>\n    );\n  }\n\n  return (\n    <div>\n      <div>\n        <Header as=\"h1\">PKCE Flow w/ Okta Hosted Login Page</Header>\n\n        { authState.isAuthenticated && !userInfo\n        && <div>Loading user information...</div>}\n\n        {authState.isAuthenticated && userInfo\n        && (\n        <div>\n          <p>\n            Welcome back,\n            {userInfo.name}\n            !\n          </p>\n          <p>\n            You have successfully authenticated against your Okta org, and have been redirected back to this application.  You now have an ID token and access token in local storage.\n            Visit the\n            {' '}\n            <a href=\"/okta-vidispine/profile\">My Profile</a>\n            {' '}\n            page to take a look inside the ID token.\n          </p>\n          <h3>Next Steps</h3>\n          <p>Currently this application is a stand-alone front end application.  At this point you can use the access token to authenticate yourself against resource servers that you control.</p>\n          <p>This sample is designed to work with one of our resource server examples.  To see access token authentication in action, please download one of these resource server examples:</p>\n          <ul>\n            {resourceServerExamples.map((example) => <li key={example.url}><a href={example.url}>{example.label}</a></li>)}\n          </ul>\n          <p>            \n            <a href=\"/okta-vidispine/test\">Vidispine test</a>\n            {' '}\n            page to see the authentication process in action.\n          </p>\n        </div>\n        )}\n\n        {!authState.isAuthenticated\n        && (\n        <div>\n          <p>If you&lsquo;re viewing this page then you have successfully started this React application.</p>\n          <p>\n            <span>This example shows you how to use the </span>\n            <a href=\"https://github.com/okta/okta-oidc-js/tree/master/packages/okta-react\">Okta React Library</a>\n            <span> to add the </span>\n            <a href=\"https://developer.okta.com/docs/guides/implement-auth-code-pkce\">PKCE Flow</a>\n            <span> to your application.</span>\n          </p>\n          <p>\n            When you click the login button below, you will be redirected to the login page on your Okta org.\n            After you authenticate, you will be returned to this application with an ID token and access token.  These tokens will be stored in local storage and can be retrieved at a later time.\n          </p>\n          <Button id=\"login-button\" primary onClick={login}>Login</Button>\n        </div>\n        )}\n\n      </div>\n    </div>\n  );\n};\nexport default Home;\n","/*\n * Copyright (c) 2018, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport React, { useEffect } from 'react';\nimport * as OktaSignIn from '@okta/okta-signin-widget';\nimport '@okta/okta-signin-widget/dist/css/okta-sign-in.min.css';\n\nimport config from './config';\n\nconst Login = () => {\n  useEffect(() => {\n    const { pkce, issuer, clientId, redirectUri, scopes } = config.oidc;\n    const widget = new OktaSignIn({\n      /**\n       * Note: when using the Sign-In Widget for an OIDC flow, it still\n       * needs to be configured with the base URL for your Okta Org. Here\n       * we derive it from the given issuer for convenience.\n       */\n      baseUrl: issuer.split('/oauth2')[0],\n      clientId,\n      redirectUri,\n      logo: 'react.svg',\n      i18n: {\n        en: {\n          'primaryauth.title': 'Sign in to React & Company',\n        },\n      },\n      authParams: {\n        pkce,\n        issuer,\n        display: 'page',\n        responseMode: pkce ? 'query' : 'fragment',\n        scopes,\n      },\n    });\n\n    widget.renderEl(\n      { el: '#sign-in-widget' },\n      () => {\n        /**\n         * In this flow, the success handler will not be called beacuse we redirect\n         * to the Okta org for the authentication workflow.\n         */\n      },\n      (err) => {\n        throw err;\n      },\n    );\n  }, []);\n\n  return (\n    <div>\n      <div id=\"sign-in-widget\" />\n    </div>\n  );\n};\nexport default Login;\n","/*\n * Copyright (c) 2018, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { useOktaAuth } from '@okta/okta-react';\nimport React, { useState, useEffect } from 'react';\nimport { Header, Icon,} from 'semantic-ui-react';\n\nconst Messages = () => {\n  const { authState } = useOktaAuth();\n  const [token, setToken] = useState(null);\n\n  // fetch messages\n  useEffect(() => {\n    if (authState.isAuthenticated) {\n      const { accessToken } = authState;\n      setToken(accessToken);\n    }\n  }, [authState]);\n\n  return (\n    <div>\n      <Header as=\"h1\">\n        <Icon name=\"spy\"/>\n        Access Token\n      </Header>\n      <div style={{'wordBreak': 'break-all'}}>\n        <strong>\n        {token}\n        </strong>\n      </div>    \n    </div>\n  );\n};\n\nexport default Messages;\n","/*\n * Copyright (c) 2018, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport axios from 'axios';\nimport { useOktaAuth } from '@okta/okta-react';\nimport React, { useState, useEffect } from 'react';\nimport { Button, Input, Header, Icon, } from 'semantic-ui-react';\n\nconst VS = () => {\n  const { authState } = useOktaAuth();\n  const [token, setToken] = useState(null);\n  const [vaas, setVaas] = useState('');\n  const [version, setVersion] = useState(null);\n\n  useEffect(() => {\n    if (authState.isAuthenticated) {\n      const { accessToken } = authState;\n      setToken(accessToken);\n    }\n  }, [authState]);\n\n  const getVersion = async () => {\n    const options = {\n      headers: { \"Authorization\": `Bearer ${token}`, 'Accept': 'text/plain' },\n    };\n\n    try {\n      const vidispineDomain = `${vaas}/API/version`;\n      const upload = await axios.get(vidispineDomain, options);\n      setVersion(upload.data);\n    } catch (error) {\n      setVersion(String(error));\n    }\n  };\n\n  return (\n    <div>\n      <Header as=\"h1\">\n        <Icon name=\"terminal\" />\n        Vidispine test call\n      </Header>\n      <Input style={{ width: '100%', marginTop: '1rem' }} onChange={e => setVaas(e.target.value)} placeholder='https://asdf.myvidispine.com' />\n      <Button onClick={(getVersion)} style={{ marginTop: '1rem' }} color='teal'>Get Version</Button>\n      <div style={{ whiteSpace: 'pre-line', marginTop: '1rem' }}>{version}</div>\n    </div>\n  );\n};\n\nexport default VS;\n","/*\n * Copyright (c) 2018, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { useOktaAuth } from '@okta/okta-react';\nimport React from 'react';\nimport { Container, Image, Menu } from 'semantic-ui-react';\n\nconst Navbar = () => {\n  const { authState, authService } = useOktaAuth();\n\n  const login = async () => authService.login('/okta-vidispine/');\n  const logout = async () => authService.logout('https://dksx.github.io/okta-vidispine/');\n\n  return (\n    <div>\n      <Menu fixed=\"top\" inverted>\n        <Container>\n          <Menu.Item as=\"a\" header href=\"/okta-vidispine/\">\n            <Image size=\"mini\" src=\"react.svg\" />\n            &nbsp;\n            Okta-React Sample Project\n          </Menu.Item>\n          {authState.isAuthenticated && <Menu.Item id=\"access-button\" as=\"a\" href=\"/okta-vidispine/token\">Access Token</Menu.Item>}\n          {authState.isAuthenticated && <Menu.Item id=\"profile-button\" as=\"a\" href=\"/okta-vidispine/profile\">Profile</Menu.Item>}\n          {authState.isAuthenticated && <Menu.Item id=\"test-button\" as=\"a\" href=\"/okta-vidispine/test\">Vidispine test</Menu.Item>}\n          {authState.isAuthenticated && <Menu.Item id=\"logout-button\" as=\"a\" onClick={logout}>Logout</Menu.Item>}\n          {!authState.isPending && !authState.isAuthenticated && <Menu.Item as=\"a\" onClick={login}>Login</Menu.Item>}\n        </Container>\n      </Menu>\n    </div>\n  );\n};\nexport default Navbar;\n","/*\n * Copyright (c) 2018, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport React, { useState, useEffect } from 'react';\nimport { useOktaAuth } from '@okta/okta-react';\nimport { Header, Icon, Table } from 'semantic-ui-react';\n\nconst Profile = () => {\n  const { authState, authService } = useOktaAuth();\n  const [userInfo, setUserInfo] = useState(null);\n\n  useEffect(() => {\n    if (!authState.isAuthenticated) {\n      // When user isn't authenticated, forget any user info\n      setUserInfo(null);\n    } else {\n      authService.getUser().then((info) => {\n        setUserInfo(info);\n      });\n    }\n  }, [authState, authService]); // Update if authState changes\n\n  if (!userInfo) {\n    return (\n      <div>\n        <p>Fetching user profile...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      <div>\n        <Header as=\"h1\">\n          <Icon name=\"drivers license outline\" />\n          {' '}\n          My User Profile (ID Token Claims)\n          {' '}\n        </Header>\n        <p>\n          Below is the information from your ID token which was obtained during the &nbsp;\n          <a href=\"https://developer.okta.com/docs/guides/implement-auth-code-pkce\">PKCE Flow</a>\n          {' '}\n          and is now stored in local storage.\n        </p>\n        <p>\n          This route is protected with the\n          <code>&lt;SecureRoute&gt;</code>\n          {' '}\n          component, which will ensure that this page cannot be accessed until you have authenticated.\n        </p>\n        <Table>\n          <thead>\n            <tr>\n              <th>Claim</th>\n              <th>Value</th>\n            </tr>\n          </thead>\n          <tbody>\n            {Object.entries(userInfo).map((claimEntry) => {\n              const claimName = claimEntry[0];\n              const claimValue = claimEntry[1];\n              const claimId = `claim-${claimName}`;\n              return (\n                <tr key={claimName}>\n                  <td>{claimName}</td>\n                  <td id={claimId}>{claimValue}</td>\n                </tr>\n              );\n            })}\n          </tbody>\n        </Table>\n      </div>\n    </div>\n  );\n};\n\nexport default Profile;\n","/*\n * Copyright (c) 2018, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport React from 'react';\nimport { BrowserRouter as Router, Route, useHistory } from 'react-router-dom';\nimport { Security, SecureRoute, LoginCallback } from '@okta/okta-react';\nimport { Container } from 'semantic-ui-react';\nimport config from './config';\nimport Home from './Home';\nimport CustomLoginComponent from './Login';\nimport Token from './Token';\nimport VS from './VS';\nimport Navbar from './Navbar';\nimport Profile from './Profile';\n\n\nconst HasAccessToRouter = () => {\n  const history = useHistory(); // example from react-router\n\n  const customAuthHandler = () => {\n    // Redirect to the /login page that has a CustomLoginComponent\n    history.push('/okta-vidispine/login');\n  };\n\n  return (\n    <Security\n      {...config.oidc}\n      onAuthRequired={customAuthHandler}\n    >\n      <Navbar />\n      <Container text style={{ marginTop: '7em', width: '100%', height: '100%' }}>\n        <Route path=\"/okta-vidispine/\" exact component={Home} />\n        <Route path=\"/okta-vidispine/implicit/callback\" component={LoginCallback} />\n        <Route path=\"/okta-vidispine/login\" component={CustomLoginComponent} />\n        <SecureRoute path=\"/okta-vidispine/token\" component={Token} />\n        <SecureRoute path=\"/okta-vidispine/profile\" component={Profile} />\n        <SecureRoute path=\"/okta-vidispine/test\" component={VS} />\n      </Container>\n    </Security>\n  );\n};\n\nconst App = () => (\n  <div>\n    <Router>\n      <HasAccessToRouter />\n    </Router>\n  </div>\n);\n\nexport default App;\n","/*\n * Copyright (c) 2018, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\n/* eslint-disable */\n// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","/*\n * Copyright (c) 2018, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'semantic-ui-css/semantic.min.css';\nimport './polyfills';\nimport App from './App';\nimport './index.css';\nimport registerServiceWorker from './registerServiceWorker';\n\n/* global document */\n/* eslint-disable react/jsx-filename-extension */\nReactDOM.render(<App />, document.getElementById('root'));\nregisterServiceWorker();\n"],"sourceRoot":""}